
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Contributing to BayesFlow &#8212; BayesFlow: Amortized Bayesian Inference</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=8fec244e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'contributing';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://www.bayesflow.org/contributing.html" />
    <link rel="icon" href="_static/bayesflow_hex.ico"/>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Patterns &amp; Caveats" href="development/index.html" />
    <link rel="prev" title="About us" href="about.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/bayesflow_hex.png" class="logo__image only-light" alt="BayesFlow: Amortized Bayesian Inference - Home"/>
    <script>document.write(`<img src="_static/bayesflow_hex.png" class="logo__image only-dark" alt="BayesFlow: Amortized Bayesian Inference - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="index.html">BayesFlow</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="examples.html">Examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="_examples/Linear_Regression_Starter.html">1. Amortized Posterior Estimation for Linear Regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/Two_Moons_Starter.html">2. Two Moons: Tackling Bimodal Posteriors</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/SIR_Posterior_Estimation.html">3. Posterior Estimation for SIR-like Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/Hyperparameter_Optimization.html">4. Hyperparameter Optimization Using Optuna</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/Bayesian_Experimental_Design.html">5. Bayesian Experimental Design (BED) with BayesFlow and PyTorch</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/From_ABC_to_BayesFlow.html">6. From pyABC to BayesFlow</a></li>
<li class="toctree-l2"><a class="reference internal" href="_examples/One_Sample_TTest.html">7. Simple Model Comparison - One Sample T-Test</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api/bayesflow.html">Public API: bayesflow package</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/bayesflow.adapters.html">bayesflow.adapters</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="api/bayesflow.adapters.transforms.html">bayesflow.adapters.transforms</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.approximators.html">bayesflow.approximators</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.benchmarks.html">bayesflow.benchmarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.datasets.html">bayesflow.datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.diagnostics.html">bayesflow.diagnostics</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.distributions.html">bayesflow.distributions</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/bayesflow.experimental.html">bayesflow.experimental</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="api/bayesflow.experimental.continuous_time_consistency_model.html">bayesflow.experimental.continuous_time_consistency_model</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/bayesflow.metrics.html">bayesflow.metrics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="api/bayesflow.metrics.functional.html">bayesflow.metrics.functional</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.networks.html">bayesflow.networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.simulators.html">bayesflow.simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.types.html">bayesflow.types</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="api/bayesflow.utils.html">bayesflow.utils</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="api/bayesflow.utils.numpy_utils.html">bayesflow.utils.numpy_utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/bayesflow.utils.logging.html">bayesflow.utils.logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/bayesflow.utils.keras_utils.html">bayesflow.utils.keras_utils</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="api/bayesflow.workflows.html">bayesflow.workflows</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About us</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Contributing to BayesFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="development/index.html">Patterns &amp; Caveats</a></li>
</ul>

    </div>
</nav></div>
        <div class="sidebar-primary-item">
<div class="rst-versions">
  
   
  <p class="caption" aria-level="2" role="heading"><span class="caption-text">Branches</span></p>
  <ul>
      <li><a href="/dev/contributing.html" class="current">dev</a></li>
  </ul>
  
</div>
</div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/bayesflow-org/bayesflow" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/bayesflow-org/bayesflow/edit/master/contributing.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/bayesflow-org/bayesflow/issues/new?title=Issue%20on%20page%20%2Fcontributing.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/contributing.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Contributing to BayesFlow</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-contribute">How to contribute</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-an-issue">1. Open an issue</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-support-for-multi-level-priors">#123: Add support for multi-level priors</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-interface">Possible Interface:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-your-development-environment">2. Set up your development environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implement-your-changes">3. Implement your changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#document-your-changes">4. Document your changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-pull-request">5. Create a pull request</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">#124: Add support for multi-level priors</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutorial-notebooks">Tutorial Notebooks</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="contributing-to-bayesflow">
<h1>Contributing to BayesFlow<a class="headerlink" href="#contributing-to-bayesflow" title="Link to this heading">#</a></h1>
<p>BayesFlow is a highly open source project. We welcome contributions from the community.</p>
<section id="how-to-contribute">
<h2>How to contribute<a class="headerlink" href="#how-to-contribute" title="Link to this heading">#</a></h2>
<p>First, take some time to read this whole guide.
Then, follow these steps to submit a contribution to BayesFlow:</p>
<section id="open-an-issue">
<h3>1. Open an issue<a class="headerlink" href="#open-an-issue" title="Link to this heading">#</a></h3>
<p>Before you start any work, please open an issue on GitHub if one does not already exist. Describe the motivation for
the changes and add possible interfaces or use cases. We will determine the feature scope and discuss implementation
details with you.</p>
<p>Here is an example of a good issue:</p>
</section>
<hr class="docutils" />
<section id="add-support-for-multi-level-priors">
<h3>#123: Add support for multi-level priors<a class="headerlink" href="#add-support-for-multi-level-priors" title="Link to this heading">#</a></h3>
<section id="motivation">
<h4>Motivation:<a class="headerlink" href="#motivation" title="Link to this heading">#</a></h4>
<p>There is currently a significant scientific push to use multi-level prior distributions for hierarchical models,
for instance in [1] and [2]. This feature would allow users to research these models more easily.</p>
</section>
<section id="possible-interface">
<h4>Possible Interface:<a class="headerlink" href="#possible-interface" title="Link to this heading">#</a></h4>
<p>The multi-level graph structure could be given implicitly via the argument names of each sampling function.
For instance:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">bayesflow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">bf</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">keras</span>


<span class="nd">@bf</span><span class="o">.</span><span class="n">distribution</span>
<span class="k">def</span><span class="w"> </span><span class="nf">prior1</span><span class="p">():</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">keras</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(),</span> <span class="n">b</span><span class="o">=</span><span class="n">keras</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">())</span>

<span class="nd">@bf</span><span class="o">.</span><span class="n">distribution</span>
<span class="k">def</span><span class="w"> </span><span class="nf">prior2</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="n">keras</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>

<span class="nd">@bf</span><span class="o">.</span><span class="n">distribution</span>
<span class="k">def</span><span class="w"> </span><span class="nf">prior3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">keras</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="references">
<h4>References:<a class="headerlink" href="#references" title="Link to this heading">#</a></h4>
<p>[1]: Some paper
[2]: Some other paper</p>
</section>
</section>
<hr class="docutils" />
<section id="set-up-your-development-environment">
<h3>2. Set up your development environment<a class="headerlink" href="#set-up-your-development-environment" title="Link to this heading">#</a></h3>
<p>Create a fork of the BayesFlow git repository using the GitHub interface.
Then clone your fork and install the development environment with conda:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/&lt;your-username&gt;/bayesflow
<span class="nb">cd</span><span class="w"> </span>bayesflow
git<span class="w"> </span>checkout<span class="w"> </span>dev
conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--file<span class="w"> </span>environment.yaml<span class="w"> </span>--name<span class="w"> </span>bayesflow
conda<span class="w"> </span>activate<span class="w"> </span>bayesflow
pre-commit<span class="w"> </span>install
</pre></div>
</div>
<p>We recommend using the PyTorch backend for development.
Be careful not to downgrade your keras version when installing the backend.</p>
<p>You can also install a triple backend cuda environment using <code class="docutils literal notranslate"><span class="pre">cuda.yaml</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--file<span class="w"> </span>cuda.yaml<span class="w"> </span>--name<span class="w"> </span>bf-cuda
</pre></div>
</div>
<p>Note that we cannot guarantee that this environment file will always work,
as it is not tested frequently or across devices.
It is provided merely as a convenience. For reliability, install only a single backend.</p>
</section>
<section id="implement-your-changes">
<h3>3. Implement your changes<a class="headerlink" href="#implement-your-changes" title="Link to this heading">#</a></h3>
<p>In general, we recommend a test-driven development approach:</p>
<ol class="arabic simple">
<li><p>Write a test for the functionality you want to add.</p></li>
<li><p>Write the code to make the test pass.</p></li>
</ol>
<p>You can run tests for your installed environment using <code class="docutils literal notranslate"><span class="pre">pytest</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest
</pre></div>
</div>
<p>Make sure to occasionally also run multi-backend tests for your OS using <a class="reference external" href="https://tox.readthedocs.io/en/latest/">tox</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tox<span class="w"> </span>--parallel<span class="w"> </span>auto
</pre></div>
</div>
<p>See <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> for details on the environment configurations.
Multi-OS tests will automatically be run once you create a pull request.</p>
<p>Note that to be backend-agnostic, your code must not:</p>
<ol class="arabic simple">
<li><p>Use code from a specific machine learning backend</p></li>
<li><p>Use code from the <code class="docutils literal notranslate"><span class="pre">keras.backend</span></code> module</p></li>
<li><p>Rely on the specific tensor object type or semantics</p></li>
</ol>
<p>Examples of bad code:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># bad: do not use specific backends</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">tensorflow</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">tf</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># bad: do not use keras.backend</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">keras</span><span class="o">.</span><span class="n">backend</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>  <span class="c1"># will error under torch backend</span>

<span class="c1"># bad: do not use tensor methods directly</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>  <span class="c1"># will error under torch backend if device is cuda</span>
</pre></div>
</div>
<p>Use instead:</p>
<div class="highlight-py3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># good: use keras instead of specific backends</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">keras</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">keras</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># good: use keras.ops, keras.random, etc.</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">keras</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># good: use keras methods instead of direct tensor methods</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">keras</span><span class="o">.</span><span class="n">ops</span><span class="o">.</span><span class="n">convert_to_numpy</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="document-your-changes">
<h3>4. Document your changes<a class="headerlink" href="#document-your-changes" title="Link to this heading">#</a></h3>
<p>The documentation uses <a class="reference external" href="https://www.sphinx-doc.org/">sphinx</a> and relies on <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">numpy style docstrings</a> in classes and functions.</p>
<p>Run the following command to install all necessary packages for setting up documentation generation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">.</span><span class="p">[</span><span class="n">docs</span><span class="p">]</span>
</pre></div>
</div>
<p>The overall <em>structure</em> of the documentation is manually designed, but the API documentation is auto-generated.</p>
<p>You can re-build the current documentation with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>docsrc
make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>dev
<span class="c1"># in case of issues, try `make clean-all`</span>
</pre></div>
</div>
<p>We also provide a multi-version documentation. To generate it, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>docsrc
make<span class="w"> </span>clean<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span>github
</pre></div>
</div>
<p>The entry point of the rendered documentation will be at <code class="docutils literal notranslate"><span class="pre">docs/index.html</span></code>.</p>
<p>Note that undocumented changes will likely be rejected.</p>
</section>
<section id="create-a-pull-request">
<h3>5. Create a pull request<a class="headerlink" href="#create-a-pull-request" title="Link to this heading">#</a></h3>
<p>Once your changes are ready, create a pull request to the <code class="docutils literal notranslate"><span class="pre">dev</span></code> branch using the GitHub interface.
Make sure to reference the issue you opened in step 1. If no issue exists, either open one first or follow the
issue guidelines for the pull request description.</p>
<p>Here is an example of a good pull request:</p>
</section>
<hr class="docutils" />
<section id="id1">
<h3>#124: Add support for multi-level priors<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Resolves #123.</p>
<p>Multi-level priors are implemented via a graph structure which is internally created from the
argument names of the sampling functions.</p>
</section>
</section>
<hr class="docutils" />
<section id="tutorial-notebooks">
<h2>Tutorial Notebooks<a class="headerlink" href="#tutorial-notebooks" title="Link to this heading">#</a></h2>
<p>New tutorial notebooks are always welcome! You can add your tutorial notebook file to <code class="docutils literal notranslate"><span class="pre">examples/</span></code> and add a reference
to the list of notebooks in <code class="docutils literal notranslate"><span class="pre">docsrc/source/examples.rst</span></code>.
Re-build the documentation (see above) and your notebook will be included.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="about.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">About us</p>
      </div>
    </a>
    <a class="right-next"
       href="development/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Patterns &amp; Caveats</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-contribute">How to contribute</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#open-an-issue">1. Open an issue</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-support-for-multi-level-priors">#123: Add support for multi-level priors</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#possible-interface">Possible Interface:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#set-up-your-development-environment">2. Set up your development environment</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#implement-your-changes">3. Implement your changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#document-your-changes">4. Document your changes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-pull-request">5. Create a pull request</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">#124: Add support for multi-level priors</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tutorial-notebooks">Tutorial Notebooks</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The BayesFlow authors
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2023-2025, BayesFlow authors (lead maintainer: Stefan T. Radev).
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>